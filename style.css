:root{
  --bg: #0b0f18;
  --panel: #0f1525;
  --accent: #00ffd1;
  --accent-2: #9c6bff;
  --text: #eaf2ff;
  --muted:#99a4bf;
  --x: #ff6b6b;
  --o: #4dd0ff;
  --win: #8fff7a;
  --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
}
* { box-sizing: border-box }
html,body{height:100%}
body{
  margin:0; font-family: Nunito, system-ui, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text); background: radial-gradient(1200px 800px at 70% -10%, #142039 0%, #0b0f18 55%) fixed;
  display:grid; place-items:center; padding:24px;
}

.app{ width: min(1100px, 100%); display:grid; gap:20px; }
header{ display:flex; gap:16px; align-items:center; justify-content:space-between; }
.title{ display:flex; align-items:center; gap:12px; }
.logo{
  width:42px; height:42px; border-radius:12px; background:
    radial-gradient(35px 35px at 70% 30%, var(--accent), transparent 60%),
    radial-gradient(50px 50px at 30% 70%, var(--accent-2), transparent 60%),
    #0d1324;
  box-shadow: var(--shadow), 0 0 30px rgba(156,107,255,.25), 0 0 30px rgba(0,255,209,.25) inset;
}
h1{ font-size: clamp(20px, 3vw, 28px); margin:0; letter-spacing:.4px }

.panel{ background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
        border-radius:20px; box-shadow: var(--shadow); backdrop-filter: blur(6px);
        border:1px solid rgba(255,255,255,.06); }

.topbar{ display:grid; grid-template-columns: 1fr auto; gap:16px; padding:14px 16px; align-items:center }
.controls{ display:flex; flex-wrap:wrap; gap:10px; }

.btn{
  --ring: transparent; cursor:pointer; user-select:none; -webkit-tap-highlight-color: transparent;
  padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.1);
  background: #111729; color: var(--text); font-weight:700; letter-spacing:.3px;
  box-shadow: var(--shadow); transition: transform .08s ease, box-shadow .2s ease, border-color .2s;
}
.btn:hover{ transform: translateY(-1px) }
.btn:active{ transform: translateY(0) scale(.98) }
.btn[aria-pressed="true"], .btn.primary{ border-color: var(--accent); box-shadow: var(--shadow), 0 0 0 6px rgba(0,255,209,.08) }
.btn.secondary{ background:#131a2e }

.statbar{ display:flex; gap:8px; align-items:center; justify-content:flex-end; flex-wrap:wrap }
.pill{ padding:8px 12px; border-radius:999px; background:#12182b; border:1px solid rgba(255,255,255,.08) }
.legend{ display:flex; gap:10px; align-items:center }
.chip{ font-weight:900; padding:3px 8px; border-radius:8px; }
.chip.x{ color: #fff; background: linear-gradient(135deg, #ff6b6b, #ff9274); }
.chip.o{ 
  color: #003040; /* Improved contrast for accessibility */
  background: linear-gradient(135deg, #87e6ff, #4dd0ff); 
}

.layout{ display:grid; grid-template-columns: 1.2fr .8fr; gap:20px }
@media (max-width: 880px){ .layout{ grid-template-columns: 1fr; } }

.board-wrap{ padding:16px; }

.board{
  width:min(520px, 100%); aspect-ratio:1; margin:auto; display:grid; gap:14px; padding:14px;
  grid-template-columns: repeat(3, 1fr); background:#0a1020; border-radius:24px; box-shadow: var(--shadow);
  border:1px solid rgba(255,255,255,.06);
}
.cell{
  position:relative; display:grid; place-items:center; font-size: clamp(36px, 8vw, 84px); font-weight:900;
  background: linear-gradient(180deg, #0e1630, #0b1026); border-radius:18px;
  border:1px solid rgba(255,255,255,.08); cursor:pointer; outline:none;
  transition: transform .08s ease, border-color .2s ease, box-shadow .2s ease;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.35), 0 12px 30px rgba(0,0,0,.35);
  aspect-ratio: 1 / 1; /* Keeps perfect square shape */
}
.cell:hover{ transform: translateY(-2px); box-shadow: inset 0 0 0 1px rgba(0,0,0,.35), 0 16px 36px rgba(0,0,0,.45) }
.cell:focus-visible{ 
  box-shadow: 0 0 0 6px rgba(156,107,255,.12), inset 0 0 0 1px rgba(255,255,255,.35); 
  outline: 2px solid var(--accent-2); /* Improved focus for accessibility */
  outline-offset: 2px;
}
.cell.disabled{ cursor:not-allowed; opacity:.7 }

.mark{ transform: scale(.8); filter: drop-shadow(0 6px 16px rgba(0,0,0,.5)); }
.mark.x{ color: var(--x); text-shadow: 0 0 28px rgba(255,107,107,.35) }
.mark.o{ color: var(--o); text-shadow: 0 0 28px rgba(77,208,255,.35) }

.winline{
  position:absolute; inset:0; pointer-events:none; display:none;
}
.board.win .winline{ display:block }
.winline svg{ width:100%; height:100% }
.winline line{ stroke: var(--win); stroke-width: 10; stroke-linecap: round; filter: drop-shadow(0 0 12px rgba(143,255,122,.6)); }

.side{ display:grid; gap:16px; padding:16px }
.card{ padding:16px; }
.score{ display:grid; grid-template-columns: repeat(3, 1fr); gap:10px }
.score .tile{
  padding:14px; text-align:center; border-radius:16px; background:#0b1328; border:1px solid rgba(255,255,255,.06);
  box-shadow: var(--shadow);
}
.k{ font-size:12px; color:var(--muted) }
.v{ font-size:26px; font-weight:900 }

.footer{ text-align:center; color:var(--muted); font-size:13px; padding-bottom:4px }
.glow{ color:var(--accent); text-shadow: 0 0 12px rgba(0,255,209,.5) }

/* Toast */
.toast{ position: fixed; left:50%; top:20px; transform: translateX(-50%);
  background:#091026; border:1px solid rgba(255,255,255,.08); box-shadow: var(--shadow);
  padding:10px 14px; border-radius:12px; display:none; z-index: 5 }
.toast.show{ display:block; animation: pop .18s ease-out }
@keyframes pop{ from{ transform: translateX(-50%) scale(.95); opacity:.6 } to{ transform: translateX(-50%) scale(1); opacity:1 } }

/* Confetti (simple) */
.confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:10 }
.confetti .p{ position:absolute; width:8px; height:12px; opacity:.9; border-radius:2px }

/* Responsive for small screens */
@media (max-width: 520px){
  .board{
    padding: 4px;
    gap: 6px;
    border-radius: 12px;
  }
  .cell{
    border-radius: 8px;
    font-size: 32px;
  }
}